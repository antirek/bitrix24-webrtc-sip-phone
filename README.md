## Bitrix24 webrtc sip phone
Тестовое задание для "Мобилон Телеком"
#### Проект состоит из:
1) `Backend` сервиса (`nest.js`, `node-vault`, `typeorm`, `pg`)
2) `Vault`
3) `PostgreSQL`
4) `NGINX`
5) Статика на ванильном `JS`, `SIP.js`, сборщик `Vite`

#### Для запуска и тестирования приложения необходимы:
1) Docker compose
2) Наличие домена
3) Наличие сертификатов

Установить свой домен в`.env` 
Установить свои сертификаты в `nginx/certs/` `domain.crt` и `domain.key`

```shell
docker compose up --build
```
#### Особенности проекта:
1) `Vault` находится в режиме отладки и не хранит данные в файловой системе. При запуске производится автоматический `Unseal`. А данные для node-vault передаются через `volume` между контейнерами `vault-init` и `backend`
2) БД  монтируется в `tmpfs` и также не сохраняет данные после перезагрузки
3) Данные для авторизации в БД берутся из `Vault` и заполняются из скрипте инициализации
4) В различных местах сервиса `backend` и статичных страницах расположены отладочные логи которые могут выводить в том числе секреты
5) Исходники для статики `widget` и `bg_worker` находятся в папке `static_project`, для переборки необходимо использовать `npm run build`
----
##### Нужно доделать
6) Раздача статики реализована при помощи основного сервиса `backend` так как битрикс запрашивает изначальные страницы `POST` запросом, и заставить веб серверы (кроме `Apache`) раздавать статику по `POST` методу у меня не вышло
7) **Не реализована авторизация** между сервисом `backend` и статикой
8) **Не реализована валидация запросов** между сервисом `backend` и статикой
9) **Не реализована централизованная обработка ответов** от сервиса `backend`
10) **Не реализована обработка альтернативных сценариев использования**, сейчас статика и сервис `backend` обижают только валидный `json`, корректная обработка ошибок не реализована
11) **Не реализовано автотестирование**


видео https://www.youtube.com/watch?v=vA4i6aqDgTo